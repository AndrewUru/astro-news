---
import Divide from "~/components/bases/divide.astro";
import { Image, Picture } from "astro:assets";
import defaultImage from "~/assets/images/default-image.jpg";
import defaultAvatar from "~/assets/images/default-avatar.jpg";
import type { CollectionEntry } from "astro:content";
import { formatDate } from "~/lib/utils/date";
import ResourcesAdd from "~/assets/svgs/resources-add.astro";
import Time04 from "~/assets/svgs/time-04.astro";
import Calendar04 from "~/assets/svgs/calendar-04.astro";

type Props = {
  article: CollectionEntry<"articles">;
  readingTime: string;
  lastModified: string;
};

const { article, readingTime, lastModified } = Astro.props;
---

<section
  class="mb-8 flex flex-col lg:flex-col-reverse items-center justify-center border-b lg:border-none py-6 pt-0 lg:pt-6"
>
  <div class="container px-0 lg:px-4 max-w-5xl w-full aspect-[20/9] lg:mt-4">
    <Picture
      src={defaultImage}
      alt="article"
      layout="full-width"
      decoding={"async"}
      loading={"lazy"}
      formats={["avif", "webp"]}
      class="w-full h-full object-cover"
    />
  </div>
  <div class="container my-4 lg:hidden flex items-center gap-2">
    <ResourcesAdd size="16" />
    <a href="#" class="a-01 font-semibold">Technology</a>
  </div>
  <div class="container max-w-5xl">
    <h1 class="text-2xl lg:text-4xl font-bold text-left text-pretty">
      {article.data.title}
    </h1>
    <div class="flex flex-col gap-4 items-start mt-2 lg:mt-8 text-sm">
      <div class="text-base-content/70 flex items-center gap-2">
        <!-- TODO: fix category nmae and href -->
        <span class="lg:flex items-center gap-1 hidden">
          <ResourcesAdd size="15" />
          <a href="#" class="a-01">Technology</a>
        </span>
        <div class="hidden lg:block">
          <Divide />
        </div>
        <!-- TODO: Fix date and replace pubDate with lastModified -->
        <span class="flex items-center gap-1">
          <Calendar04 size="15" />
          <time datetime={lastModified}>{formatDate(lastModified)}</time>
        </span>
        <Divide />
        <span class="flex items-center gap-1">
          <Time04 size="15" />
          <span>{readingTime}</span>
        </span>
      </div>
      <!-- TODO: fix name, href, avatar of author -->
      <a href="#" class="flex items-center gap-2">
        <div class="avatar">
          <div class="w-8 rounded-full">
            <Image
              src={defaultAvatar}
              alt="author"
              width={48}
              height={48}
              format="webp"
              quality={80}
            />
          </div>
        </div>
        <span class="font-bold capitalize">Jane Doe</span>
      </a>
    </div>
  </div>
</section>
