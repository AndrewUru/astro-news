---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import Time04 from "~/assets/svgs/time-04.astro";
import defaultImage from "~/assets/images/default-image.jpg";
import Divider from "~/components/bases/divider.astro";
import { render } from "astro:content";
import { getDateDistance } from "~/lib/utils/date";

type Props = {
  article: CollectionEntry<"articles">;
  isFirst?: boolean;
  isLast?: boolean;
};
const { article, isLast, isFirst } = Astro.props;

const { remarkPluginFrontmatter } = await render(article);
---

<article
  class:list={[
    "group py-2",
    isFirst ? "pt-0" : "pt-2",
    isLast ? "border-b-0 pb-0" : "border-b",
  ]}
>
  <a href="#" class="items-center gap-3 grid grid-rows-1 grid-cols-9">
    <div class="overflow-hidden col-span-3 h-full rounded-md">
      <Image src={defaultImage} alt="default image" class="h-full w-full" />
    </div>

    <div class="col-span-6 h-full flex flex-col my-auto">
      <div class="flex items-center gap-2">
        <div class="flex-1">
          <h2 class="text-base group-hover:underline">
            {article.data.title}
          </h2>
          <p class="text-sm text-base-content/80 text-balance md:line-clamp-2 lg:line-clamp-3">
            {article.data.description}
          </p>
        </div>
      </div>
      <div class="flex items-center text-xs text-base-content/80 mt-auto">
        <span class="text-primary">{article.data.category}</span>
        <Divider/>
        <span>{getDateDistance(remarkPluginFrontmatter.lastModified)}</span>
      </div>
    </div>
  </a>
</article>
