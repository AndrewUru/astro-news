---
import { authorsHandler } from "@utils/handlers/authorsHandler";
import { Image } from "astro:assets";

type Props = {
  author: string;
  count: number;
};
const { author, count } = Astro.props;

const currentAuthor = await authorsHandler.getAuthor(author);
---

<div class="col-span-1 mt-2">
  <a
    href={`/authors/${currentAuthor.id}`}
    class="flex flex-col items-center gap-4"
  >
    <div class="avatar">
      <div
        class="ring-primary ring-offset-base-100 w-24 rounded-full ring ring-offset-[5px]"
      >
        <Image
          src={currentAuthor.data.avatar}
          alt={currentAuthor.data.name}
          width={96}
          height={96}
          class="rounded-full"
        />
      </div>
    </div>

    <div class="flex flex-col gap-1 items-center">
      <h3 class="text-sm font-medium">{currentAuthor.data.name}</h3>
      <p class="text-sm text-base-content/70">
        {count > 1 ? `${count} articles` : `${count} article`}
      </p>
    </div>
  </a>
</div>
