---
import { getEntry } from "astro:content";
import BaseLayout from "@layouts/base.astro";
import { MetaGenerator } from "@utils/metaGenerator";
import NewsTicker from "./_components/news-ticker.astro";
import Headline from "./_components/headline.astro";

const entry = await getEntry("pages", "home");

if (entry === undefined) {
  return Astro.redirect("/articles");
}

const [newsTicker, headlines, latestNews, topAuthors] = entry.data.blocks;

const metedata = await MetaGenerator(entry);
---

<BaseLayout {...metedata}>
  <NewsTicker {...newsTicker} />
  <Headline {...headlines} />
</BaseLayout>
